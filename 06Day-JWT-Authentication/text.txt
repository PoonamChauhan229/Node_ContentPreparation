Accepting an Authentication Token:

setting up an express middleware function 
=>add authentication application

****
In this case will check for an incoming authentication token it will verify that ,it is a valid JSON web token, then it will find the associated user
****

Creating middleware to be used throughout your app it's best to define it in a separate file so we can keep things nice and organized

>src> Middleware/auth.js

the whole authentication process starts with 
=>the client taking that authentication token that they get from signing up or logging in 
=>and providing it with the request.

After the Login Request,
Take the authentication token showing up.
Grab the authentication token that was just created and sent back with the last login request

Setup in an request header
and put  Key and Value in Get all users request.

Key:Authorization
Value: Bearer token
        Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NDkwMDdlNmFlMGQ4MjU3Nzk4MTE4NTkiLCJpYXQiOjE2ODgxMzY2MzR9.0vHeCVZGFZtQ-L5p-O-RNcyuulE8h708-FCv0rW0xSU

This is the information necessary to get authenticated.
how to access this information and then validate it from our server?

After doing this, let go to auth.js file.

Now, we have set up an proper authentication.
load two things 
=>Load any JSON web token library so we can validate the token being provided
=>Load the User model so we can find them in the database once we've validated the off token.

Advanced postman features:

1-Set up an Environment.
Now, working on localhost its fine
but in future, we would deploy and url would change.
So we need to test production endpoints
Dozen of request again and again swapping up.

Click on settings icon=>
Task Manager API(dev)
Task Manager API(prod)

Added the url: localhost:3000/
and click on add

Now to use it {{url}} instead of localhost:3000/

Now, in case in future, we have to change an URL, we can just update the environment varaibles.

Authentication :
2nd=> Bearer and Authorization
This is working only in Get profile

Go to Authorization:
Select Bearer Token:
paste te token in it.

Task Manager collection
Click on ... dots
Go to Authorization
Bearer Token:
Update it

Login and create
No Auth under Authorization.


Now, we will put JS code little bit to perform automation.

Now, we need to automate the token as well
We will again to ... dots of collection.

Authorization: 
Token: {{authToken}}
This as of now doesnt exists.

We will write some code and set up.
Now, inside Test Tab in the login
if(pm.response.code===200){
pm.environment.set('authToken',pm.response.json().token)

}

This will to automate and save the token without passing it manually.

LogOut:

Now add an Logout Route
Add below signup and login.


